<!DOCTYPE html>
<html lang="en">

<head>
  <title>Chat Me</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/assets/css/style.css" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    ::-webkit-scrollbar {
      width: .2rem;
    }

    ::-webkit-scrollbar-thumb {
      background-color: #ccc;
      width: .1rem;
      border-radius: 1rem;
    }
  </style>
</head>

<body>
  <div class="h-screen w-screen bg-slate-800 overflow-hidden relative  text-slate-100 md:flex" x-data="users">
    <input type="checkbox" id="menu" aria-hidden="true" class="peer hidden" x-ref="menu" />

    <aside
      class="absolute top-0 -left-full transition transition h-full w-full md:w-80 duration-500 peer-checked:translate-x-full bg-slate-800/50 md:static md:shrink-0"
      @click.self="$refs.menu.checked = false">
      <div class="flex flex-col bg-slate-900 h-full w-64 md:w-full justify-between">
        <ul class="flex flex-col gap-4 px-4 py-8 md:px-8 overflow-auto h-3/4">
          <template x-for="user in users">
            <li>
              <button
                class="flex gap-4 items-center bg-slate-600 hover:bg-slate-700 w-full rounded-md p-2 shadow shadow-slate-400/70 transition duration-300 active:shadow-none"
                @click="() => selectChat(user.username)"
                :class="{'ring-[3px] ring-sky-500 ring-offset-[3px] ring-offset-slate-900': user.username === chatWith}">
                <div class="h-12 w-12">
                  <img :src="user?.avatarImage" />
                </div>
                <p x-text="user?.username"></p>
              </button>
            </li>
          </template>
        </ul>

        <div class="flex items-center shrink-0 justify-center p-8 gap-4">
          <img class="h-16 w-16" :src="me?.avatarImage" :alt="`avatar of ${me?.username}`" />
          <span class="text-2xl font-bold" x-text="me?.username"></span>
        </div>
      </div>
    </aside>

    <div class="p-4 md:px-8 grow">
      <section class="flex justify-between items-center m-2">
        <h2 class="font-bold text-2xl flex items-center gap-4">
          <span class="inline-block h-12 w-12"><img :src="currentChat?.avatarImage" /></span>
            <span x-text="currentChat.username"></span>
        </h2>
        <label for="menu"
          class="px-4 py-3 rounded-lg bg-slate-600 py-2 font-bold uppercase shadow shadow-slate-600 transition hover:bg-slate-700 active:shadow-none md:hidden">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </label>
      </section>
      <main>
        <section x-show="!currentChat" class="flex flex-col items-center justify-center">
          <div> <img src="/assets/images/robot.gif" alt="welcome robot" /></div>
          <div class="text-center">
            <h1 class="font-bold text-2xl md:text-3xl monospace">Welcome <span class="text-green-300"
                x-text="me?.username"></span>!</h1>
            <p>Please select a chat to start messaging.</p>
          </div>
        </section>

        <section>
          <!-- chat header -->
          <div>


          </div>
        </section>
      </main>
    </div>

  </div>

  <script src="/assets/js/chat.js"></script>

</body>

</html>
